<div id="readability-page-1" class="page"><div data-post-id="1cb97e3ab041" data-source="post_page" data-tracking-context="postPage"><section name="5cb9"><div><div><figure name="7162" id="7162"><div><p><img data-image-id="1*IIP48wXbJ3XRIBNbdLyDcQ.jpeg" data-width="2000" data-height="704" src="https://cdn-images-1.medium.com/max/2000/1*IIP48wXbJ3XRIBNbdLyDcQ.jpeg"></p></div></figure></div><div><h2 name="21c1" id="21c1">Cheap, easy to use hosting, entirely under your&nbsp;control.</h2><p name="c62d" id="c62d"><a href="https://www.digitalocean.com" data-href="https://www.digitalocean.com" rel="nofollow noopener" target="_blank">DigitalOcean</a> are a <span class="text-annotation" id="annotation-1" >superbly cheap</span> and remarkably frictionless platform to run your servers (a cut-down and honed AWS competitor) in the cloud. If you want quick easy hosting, they’re fantastic. The one downside with <a href="https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29" data-href="https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29" rel="nofollow noopener" target="_blank">IaaS</a> platforms like this though is that you have to manage them yourself, and they can’t give you the same effortless deployment experience as a <a href="https://en.wikipedia.org/wiki/Cloud_computing#Platform_as_a_service_.28PaaS.29" data-href="https://en.wikipedia.org/wiki/Cloud_computing#Platform_as_a_service_.28PaaS.29" rel="nofollow noopener" target="_blank">PaaS</a> product like <a href="https://www.heroku.com" data-href="https://www.heroku.com" rel="nofollow noopener" target="_blank">Heroku</a>. There’s a solution: <a href="http://dokku.viewdocs.io/dokku/" data-href="http://dokku.viewdocs.io/dokku/" rel="nofollow noopener" target="_blank">Dokku</a>.</p><p name="171d" id="171d">Dokku is a Heroku implementation. It’s based on Docker, although you don’t really need to care about that. You start Dokku, tell it what services you need (a database please), and then just push deployments of your application to it, and it handles all the rest. In addition, DigitalOcean provide one-click setup for it, giving you a basic configured instance straight out of the box.</p><p name="d7bd" id="d7bd">There’s still a tiny bit of initial setup required to get it usable though, and unfortunately DigitalOcean’s <a href="https://www.digitalocean.com/community/tutorials/how-to-use-the-dokku-one-click-install-image-to-deploy-your-app" data-href="https://www.digitalocean.com/community/tutorials/how-to-use-the-dokku-one-click-install-image-to-deploy-your-app" rel="nofollow noopener" target="_blank">own Dokku docs</a> come with a big deprecation warning. Fortunately, once you know the magic steps, doing the whole thing yourself from scratch isn’t too hard:</p><ol><li name="7920" id="7920">Create a DigitalOcean account. For bonus points, use <a href="https://m.do.co/c/f19e325a3912" data-href="https://m.do.co/c/f19e325a3912" rel="nofollow noopener" target="_blank">my referral link</a> and we both get $10 free credit (= 2 months of hosting).</li><li name="ea42" id="ea42">Do the standard setup steps (confirm your email, add a credit card)</li><li name="3a83" id="3a83">Launch a Dokku instance (v0.4.14 at the time of writing) from the ‘One-Click Apps’ tab <a href="https://cloud.digitalocean.com/droplets/new" data-href="https://cloud.digitalocean.com/droplets/new" rel="nofollow noopener" target="_blank">https://cloud.digitalocean.com/droplets/new</a>. Make sure to add your SSH key!</li><li name="de9a" id="de9a">One the instance starts up 60 seconds later, open its IP (available on the droplets page) in a browser to get the Dokku setup page. This page should already have your public key and know the instance’s IP. Add your server’s hostname, enable virtual hosting, and click ‘Finish Setup’.</li><li name="0729" id="0729">This will then redirect you to the full Dokku setup documentation. That’ll be useful for reference and more complex setup later, but you don’t need it for now.</li><li name="c762" id="c762">SSH directly into your new Droplet: <strong>ssh root@droplet-ip</strong></li><li name="c4fb" id="c4fb">Create your dokku app: <strong>dokku apps:create app-name</strong></li><li name="a655" id="a655">On your local machine, in your project’s Git repository, add your droplet as a remote: <strong>git remote add dokku dokku@droplet-ip:app-name</strong></li><li name="a01c" id="a01c">To have your Node app work in Dokku by default, it’ll need to start up when ‘<a href="https://docs.npmjs.com/cli/start" data-href="https://docs.npmjs.com/cli/start" rel="nofollow noopener" target="_blank">npm start</a>’ is run, and to then listen on the port specified by the PORT environmental variable. You can either make the changes to do that, tweak this yourself with your own Procfile (as on Heroku), or control everything completely with your own Dockerfile.</li><li name="f561" id="f561">If you need environmental variables set for your service, ssh in as root and set them with: <strong>dokku config:set app-name KEY=VALUE</strong></li><li name="8298" id="8298">Once those changes are made you can deploy your code to the remote: <strong>git push dokku master</strong>. By default it’ll be auto-detected as a Node project, started, and have the given port exposed.</li><li name="4a10" id="4a10">Once your deploy is complete, it’ll print its URL. Go there to see your service go live! (Note that if you may need to update the DNS for your domain name to point towards your new Dokku server first)</li><li name="9220" id="9220">By default your service will be available at app-name.your-hostname. You can add more domains (such as your full root domain) by running: <strong>dokku domains:add app-name new-domain</strong></li></ol><p name="0cb6" id="0cb6">Hopefully that’s it! With this you should have your service up and running, on your domain of choice, and trivially deployable in future with just a git push.</p><p name="080d" id="080d"><em>(Wondering what I’m running on Dokku? </em><a href="http://tim.fyi" data-href="http://tim.fyi" rel="nofollow noopener" target="_blank"><em>Watch this space</em></a><em>.)</em></p></div><div><figure name="7202" id="7202"><div><p><img data-image-id="1*QvPSFU3hRTezzsKFI8Aotw.jpeg" data-width="3264" data-height="2448" src="https://cdn-images-1.medium.com/max/2000/1*QvPSFU3hRTezzsKFI8Aotw.jpeg"></p></div></figure></div></div></section></div></div>